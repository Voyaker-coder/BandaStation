<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><base href="../"><link rel="stylesheet" href="dmdoc.css"><title>/datum/ticket_manager - /tg/ Station 13</title></head><body><header><a href="index.html">/tg/ Station 13</a> - <a href="index.html#modules">Modules</a> - <a href="index.html#types">Types</a> — <a href="datum/ticket_manager.html#var">Var Details</a> - <a href="datum/ticket_manager.html#proc">Proc Details</a></header><main><h1>ticket_manager <aside>/<a href="datum.html">datum</a>/<a href="datum/ticket_manager.html">ticket_manager</a></aside> <a href="https://github.com/Voyaker-coder/BandaStation/blob/c0b9a2293eabd5d775751925d9f4e3b3e81f70e8/modular_bandastation/ticket_manager/code/manager_ui.dm#L4"><img src="git.png" width="16" height="16" title="modular_bandastation/ticket_manager/code/manager_ui.dm 4"></a></h1><table class="summary" cellspacing="0"><tr><td colspan="2"><h2>Vars</h2></td></tr><tr><th><a href="datum/ticket_manager.html#var/all_tickets">all_tickets</a></th><td>The set of all  tickets</td></tr><tr><th><a href="datum/ticket_manager.html#var/emojis">emojis</a></th><td>The set of all available emojis</td></tr><tr><td colspan="2"><h2>Procs</h2></td></tr><tr><th><a href="datum/ticket_manager.html#proc/add_ticket_message">add_ticket_message</a></th><td>Adds message to ticket. Allows HTML tags from both sides and parses emoji
Will send chat message about new ticket message to admin, if reply from ticket initiator
and message to player if replies someone from admins</td></tr><tr><th><a href="datum/ticket_manager.html#proc/add_to_ticket_writers">add_to_ticket_writers</a></th><td>Adds user to ticket writers when he starts typing. Used for type indicator in ticket chat UI</td></tr><tr><th><a href="datum/ticket_manager.html#proc/can_send_message">can_send_message</a></th><td>Checks if user can send message to ticket.</td></tr><tr><th><a href="datum/ticket_manager.html#proc/client_login">client_login</a></th><td>Adds little notification to ticket chat about player reconnect</td></tr><tr><th><a href="datum/ticket_manager.html#proc/client_logout">client_logout</a></th><td>Adds little notification to ticket chat about player disconnect</td></tr><tr><th><a href="datum/ticket_manager.html#proc/link_admin_to_ticket">link_admin_to_ticket</a></th><td>Link admin to ticket.</td></tr><tr><th><a href="datum/ticket_manager.html#proc/open_existing_ticket">open_existing_ticket</a></th><td>Checking existing user ticket, and send message to it IF stuff writed something</td></tr><tr><th><a href="datum/ticket_manager.html#proc/remove_from_ticket_writers">remove_from_ticket_writers</a></th><td>Removes user from ticket writers when he stops typing or sends message. Used for type indicator in ticket chat UI</td></tr><tr><th><a href="datum/ticket_manager.html#proc/send_chat_message_to_admin">send_chat_message_to_admin</a></th><td>Send player ticket reply to admin, if he's online. And make some logs for other admins</td></tr><tr><th><a href="datum/ticket_manager.html#proc/send_chat_message_to_player">send_chat_message_to_player</a></th><td>Send admin ticket reply to player, if he's online. And make some logs for other admins</td></tr><tr><th><a href="datum/ticket_manager.html#proc/set_ticket_state">set_ticket_state</a></th><td>Changes ticket state. Allowed new states: TICKET_OPEN, TICKET_CLOSED, TICKET_RESOLVED</td></tr></table><h2 id="var">Var Details</h2><h3 id="var/all_tickets"><aside class="declaration">var </aside>all_tickets <aside>– /alist</aside> <a href="https://github.com/Voyaker-coder/BandaStation/blob/c0b9a2293eabd5d775751925d9f4e3b3e81f70e8/modular_bandastation/ticket_manager/code/manager_ui.dm#L8"><img src="git.png" width="16" height="16" title="modular_bandastation/ticket_manager/code/manager_ui.dm 8"></a></h3><p>The set of all  tickets</p><h3 id="var/emojis"><aside class="declaration">var </aside>emojis <aside>– /list</aside> <a href="https://github.com/Voyaker-coder/BandaStation/blob/c0b9a2293eabd5d775751925d9f4e3b3e81f70e8/modular_bandastation/ticket_manager/code/manager_ui.dm#L6"><img src="git.png" width="16" height="16" title="modular_bandastation/ticket_manager/code/manager_ui.dm 6"></a></h3><p>The set of all available emojis</p><h2 id="proc">Proc Details</h2><h3 id="proc/add_ticket_message"><aside class="declaration">proc </aside>add_ticket_message<aside>(/<a href="client.html">client</a>/sender, /<a href="datum.html">datum</a>/<a href="datum/help_ticket.html">help_ticket</a>/needed_ticket, message)  <a href="https://github.com/Voyaker-coder/BandaStation/blob/c0b9a2293eabd5d775751925d9f4e3b3e81f70e8/modular_bandastation/ticket_manager/code/manager_helpers.dm#L91"><img src="git.png" width="16" height="16" title="modular_bandastation/ticket_manager/code/manager_helpers.dm 91"></a></aside></h3><p>Adds message to ticket. Allows HTML tags from both sides and parses emoji
Will send chat message about new ticket message to admin, if reply from ticket initiator
and message to player if replies someone from admins</p><h3 id="proc/add_to_ticket_writers"><aside class="declaration">proc </aside>add_to_ticket_writers<aside>(/<a href="client.html">client</a>/writer, /<a href="datum.html">datum</a>/<a href="datum/help_ticket.html">help_ticket</a>/needed_ticket, update_ui)  <a href="https://github.com/Voyaker-coder/BandaStation/blob/c0b9a2293eabd5d775751925d9f4e3b3e81f70e8/modular_bandastation/ticket_manager/code/manager_helpers.dm#L63"><img src="git.png" width="16" height="16" title="modular_bandastation/ticket_manager/code/manager_helpers.dm 63"></a></aside></h3><p>Adds user to ticket writers when he starts typing. Used for type indicator in ticket chat UI</p><h3 id="proc/can_send_message"><aside class="declaration">proc </aside>can_send_message<aside>(/<a href="client.html">client</a>/user, /<a href="datum.html">datum</a>/<a href="datum/help_ticket.html">help_ticket</a>/user_ticket, /<a href="datum.html">datum</a>/<a href="datum/help_ticket.html">help_ticket</a>/needed_ticket)  <a href="https://github.com/Voyaker-coder/BandaStation/blob/c0b9a2293eabd5d775751925d9f4e3b3e81f70e8/modular_bandastation/ticket_manager/code/manager_helpers.dm#L2"><img src="git.png" width="16" height="16" title="modular_bandastation/ticket_manager/code/manager_helpers.dm 2"></a></aside></h3><p>Checks if user can send message to ticket.</p><h3 id="proc/client_login"><aside class="declaration">proc </aside>client_login<aside>(/<a href="datum.html">datum</a>/<a href="datum/persistent_client.html">persistent_client</a>/p_client)  <a href="https://github.com/Voyaker-coder/BandaStation/blob/c0b9a2293eabd5d775751925d9f4e3b3e81f70e8/modular_bandastation/ticket_manager/code/manager_helpers.dm#L214"><img src="git.png" width="16" height="16" title="modular_bandastation/ticket_manager/code/manager_helpers.dm 214"></a></aside></h3><p>Adds little notification to ticket chat about player reconnect</p><h3 id="proc/client_logout"><aside class="declaration">proc </aside>client_logout<aside>(/<a href="datum.html">datum</a>/<a href="datum/persistent_client.html">persistent_client</a>/p_client)  <a href="https://github.com/Voyaker-coder/BandaStation/blob/c0b9a2293eabd5d775751925d9f4e3b3e81f70e8/modular_bandastation/ticket_manager/code/manager_helpers.dm#L194"><img src="git.png" width="16" height="16" title="modular_bandastation/ticket_manager/code/manager_helpers.dm 194"></a></aside></h3><p>Adds little notification to ticket chat about player disconnect</p><h3 id="proc/link_admin_to_ticket"><aside class="declaration">proc </aside>link_admin_to_ticket<aside>(/<a href="client.html">client</a>/admin, /<a href="datum.html">datum</a>/<a href="datum/help_ticket.html">help_ticket</a>/needed_ticket)  <a href="https://github.com/Voyaker-coder/BandaStation/blob/c0b9a2293eabd5d775751925d9f4e3b3e81f70e8/modular_bandastation/ticket_manager/code/manager_helpers.dm#L25"><img src="git.png" width="16" height="16" title="modular_bandastation/ticket_manager/code/manager_helpers.dm 25"></a></aside></h3><p>Link admin to ticket.</p><h3 id="proc/open_existing_ticket"><aside class="declaration">proc </aside>open_existing_ticket<aside>(/<a href="client.html">client</a>/stuff, /<a href="client.html">client</a>/ticket_holder, message)  <a href="https://github.com/Voyaker-coder/BandaStation/blob/c0b9a2293eabd5d775751925d9f4e3b3e81f70e8/modular_bandastation/ticket_manager/code/manager_helpers.dm#L299"><img src="git.png" width="16" height="16" title="modular_bandastation/ticket_manager/code/manager_helpers.dm 299"></a></aside></h3><p>Checking existing user ticket, and send message to it IF stuff writed something</p><h3 id="proc/remove_from_ticket_writers"><aside class="declaration">proc </aside>remove_from_ticket_writers<aside>(/<a href="client.html">client</a>/writer, /<a href="datum.html">datum</a>/<a href="datum/help_ticket.html">help_ticket</a>/needed_ticket, update_ui)  <a href="https://github.com/Voyaker-coder/BandaStation/blob/c0b9a2293eabd5d775751925d9f4e3b3e81f70e8/modular_bandastation/ticket_manager/code/manager_helpers.dm#L76"><img src="git.png" width="16" height="16" title="modular_bandastation/ticket_manager/code/manager_helpers.dm 76"></a></aside></h3><p>Removes user from ticket writers when he stops typing or sends message. Used for type indicator in ticket chat UI</p><h3 id="proc/send_chat_message_to_admin"><aside class="declaration">proc </aside>send_chat_message_to_admin<aside>(/<a href="client.html">client</a>/player, /<a href="datum.html">datum</a>/<a href="datum/help_ticket.html">help_ticket</a>/needed_ticket, raw_message)  <a href="https://github.com/Voyaker-coder/BandaStation/blob/c0b9a2293eabd5d775751925d9f4e3b3e81f70e8/modular_bandastation/ticket_manager/code/manager_helpers.dm#L261"><img src="git.png" width="16" height="16" title="modular_bandastation/ticket_manager/code/manager_helpers.dm 261"></a></aside></h3><p>Send player ticket reply to admin, if he's online. And make some logs for other admins</p><h3 id="proc/send_chat_message_to_player"><aside class="declaration">proc </aside>send_chat_message_to_player<aside>(/<a href="client.html">client</a>/admin, /<a href="datum.html">datum</a>/<a href="datum/help_ticket.html">help_ticket</a>/needed_ticket, raw_message)  <a href="https://github.com/Voyaker-coder/BandaStation/blob/c0b9a2293eabd5d775751925d9f4e3b3e81f70e8/modular_bandastation/ticket_manager/code/manager_helpers.dm#L232"><img src="git.png" width="16" height="16" title="modular_bandastation/ticket_manager/code/manager_helpers.dm 232"></a></aside></h3><p>Send admin ticket reply to player, if he's online. And make some logs for other admins</p><h3 id="proc/set_ticket_state"><aside class="declaration">proc </aside>set_ticket_state<aside>(/<a href="client.html">client</a>/admin, /<a href="datum.html">datum</a>/<a href="datum/help_ticket.html">help_ticket</a>/needed_ticket, new_state)  <a href="https://github.com/Voyaker-coder/BandaStation/blob/c0b9a2293eabd5d775751925d9f4e3b3e81f70e8/modular_bandastation/ticket_manager/code/manager_helpers.dm#L118"><img src="git.png" width="16" height="16" title="modular_bandastation/ticket_manager/code/manager_helpers.dm 118"></a></aside></h3><p>Changes ticket state. Allowed new states: TICKET_OPEN, TICKET_CLOSED, TICKET_RESOLVED</p></main><footer>tgstation.dme <a href="https://github.com/Voyaker-coder/BandaStation/tree/c0b9a2293eabd5d775751925d9f4e3b3e81f70e8">c0b9a22</a> (master) — <a href="https://github.com/SpaceManiac/SpacemanDMM/blob/master/crates/dmdoc/README.md">dmdoc 1.11.0</a></footer></body></html>